{% extends 'base.html' %}

{% block title %} Sign Up {% endblock %}

{% block head %} {% endblock %}

{% block body %} 
    <!-- Account Creation =Input -->
    <div class="box">
        <form method="post" id="signUpForm">
            <h2 style="margin-top: 0;">Create Account</h2>
            <label for="email"><b>Email Address</b></label>
            <input style="margin-top: 10px;" type="email" placeholder="Enter Email" name="email" id="email"
                oninput="canCreate()" required>
            <div style="height: 15px;"></div>
            <label for="password"><b>Password</b></label>
            <input style="margin-top: 10px;" type="password" placeholder="Enter Password" name="password" id="password"
                oninput="canCreate()" pattern=".{8,}" title="Password must have atleast 8 characters" required>
            <div style="height: 15px;"></div>
            <label for="confirmPassword"><b>Confirm Password</b></label>
            <input style="margin-top: 10px;" type="password" placeholder="Confirm Password" name="confirmPassword"
                id="confirmPassword" oninput="canCreate()" pattern=".{8,}" title="Password must have atleast 8 characters" required>
            <sub style="color: rgb(192, 0, 0);" id="passwordsNotMatch" hidden>Passwords do not match</sub>
            <div style="height: 5px;"></div>
            <button disabled style="margin-top: 20px;" type="submit" id="create">Create Account</button>
            <p style="text-align: center;">Already have an account? Login <a href="{{ url_for('login') }}">here</a>. <br>Forgot password? Reset <a href="{{ url_for('forgetpassword') }}">here</a>.</p>
            {% for msg in msgs %}
                <p style="text-align: center; color: red;">{{ msg }}</p>
            {% endfor %}
            <p style="text-align: center; color: green;">{{ final }}</p>
        </form>
    </div>

    <script>
        function canCreate() {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const submitButton = document.getElementById('create');
            const passwordsNotMatchText = document.getElementById('passwordsNotMatch');

            // Check if all fields are filled
            const allFieldsFilled = emailInput.value !== '' && passwordInput.value !== '' && confirmPasswordInput.value !== '';

            // Check if passwords match
            const passwordsMatch = passwordInput.value === confirmPasswordInput.value;

            // Show or hide the "passwordsNotMatch" text based on password match
            if (!passwordsMatch) {
                passwordsNotMatchText.style.display = 'block';
            } else {
                passwordsNotMatchText.style.display = 'none';
            }

            // Enable or disable the submit button
            submitButton.disabled = !(allFieldsFilled && passwordsMatch);
        }
    </script>
{% endblock %}